$(document).ready(function(){
  $("select#bookmark_category_id").change(function(){
    var id_value_string = $(this).val();
    if (id_value_string == "") { 
        $("select#bookmark_subcategory_id option").remove();
        var row = "<option value=\"" + "" + "\">" + "" + "</option>";
        $(row).appendTo("select#bookmark_subcategory_id");
    }else {
        $.ajax({
            dataType: "json",
            url:"update_subcategories/"+id_value_string,        
            error: function(XMLHttpRequest, errorTextStatus, error){
                alert("Failed to submit : "+ erorTextStatus+" ;"+error);
            },
            success: function(data){                    
                $("select#bookmark_subcategory_id option").remove();
                var row = "<option value=\"" + "" + "\">" + "" + "</option>";
                $(row).appendTo("select#bookmark_subcategory_id"); 
                $.each(data, function(i, j){
                    row = "<option value=\"" + j.id + "\">" + j.title + "</option>";   
                    $(row).appendTo("select#bookmark_subcategory_id");                     
                });             
            }
        })
    };
  });
$(".category").change(function(){
    var id_value_string = $(this).val();
    if (id_value_string == "" ){
       $.ajax({
         dataType: "json",
            url:"All/",        
            error: function(XMLHttpRequest, errorTextStatus, error){
                alert("Failed to submit : "+ erorTextStatus+" ;"+error);
            },
            success: function(data){
                $("tbody#display").remove();
                var tbody = document.createElement("tbody");
                tbody.id = "display";
                document.getElementById("myTable").appendChild(tbody);
                for (var i = 0; i < data.length; i+=6) {
                    row = "<p>" + data[i]+ "" + data[i+1] + "" + data[i+2] + "" + data[i+3] + "" + data[i+4]+ "" + data[i+5] +  "</p>";
                    $(row).appendTo("tbody#display");                     
                };
            }
       })   
    }
});
$("select#bookmark_subcategory_id").change(function(){
    var id_value_string = $(this).val();
    if (id_value_string == "" ){
       $.ajax({
         dataType: "json",
            url:"All/",        
            error: function(XMLHttpRequest, errorTextStatus, error){
                alert("Failed to submit : "+ erorTextStatus+" ;"+error);
            },
            success: function(data){
                $("tbody#display").remove();
                var tbody = document.createElement("tbody");
                tbody.id = "display";
                document.getElementById("myTable").appendChild(tbody);
                for (var i = 0; i < data.length; i+=6) {
                    row = "<p>" + data[i]+ "" + data[i+1] + "" + data[i+2] + "" + data[i+3] + "" + data[i+4]+ "" + data[i+5] +  "</p>";
                    $(row).appendTo("tbody#display");                     
                };
            }
       })
    }else{
        $.ajax({
            dataType: "json",
            url:"update_bookmarks/"+id_value_string,        
            error: function(XMLHttpRequest, errorTextStatus, error){
                alert("Failed to submit : "+ erorTextStatus+" ;"+error);
            },
            success: function(data){
                $("tbody#display").remove();
                var tbody = document.createElement("tbody");
                tbody.id = "display";
                document.getElementById("myTable").appendChild(tbody);
                for (var i = 0; i < data.length; i+=4) {
                    row = "<p>" + data[i]+ "" + data[i+1] + "" + data[i+2] + "" + data[i+3] +  "</p>";
                    $(row).appendTo("tbody#display");                     
                };
            }
        });
    }
        
  });
});
  